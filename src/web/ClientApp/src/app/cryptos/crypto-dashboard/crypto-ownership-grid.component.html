<div *ngIf="owned">

  <span *ngIf="owned.length==0">
    You have no crypto purchases recorded.
  </span>
  <div class="mt-4" *ngIf="owned.length > 0">
    <a href="/api/stocks/export/owned" class="btn btn-link">Export owned</a>
    <table class="table table-hover">
      <thead>
        <tr>
          <th class="sort-header" (click)="sort('token')">Token</th>
          <th class="sort-header" (click)="sort('quantity')">Quantity</th>
          <th class="sort-header" (click)="sort('price')">Price</th>
          <th class="text-right sort-header" (click)="sort('averageCost')">Average Cost</th>
          <th class="text-right sort-header" (click)="sort('invested')" align="center">Invested</th>
          <th class="text-right sort-header" (click)="sort('profits')">Gain/Loss</th>
          <th class="text-right sort-header" (click)="sort('profitsPct')">%</th>
          <th class="text-right sort-header" (click)="sort('equity')">Equity</th>
          <th class="text-right sort-header" (click)="sort('daysheld')">Days Held</th>

        </tr>
      </thead>
      <tr *ngFor="let token of owned">
        <td><a [routerLink]="[ '/cryptos', token.token ]">{{token.token}}</a></td>
        <td>{{token.quantity}}</td>
        <td>{{token.price | currency}}</td>
        <td class="text-right">{{token.averageCost | currency}}</td>
        <td class="text-right">{{token.cost | currency}}<small> {{ownershipPct(token) | percent}}</small></td>
        <td class="text-right" [ngClass]="{'profits-positive': token.profits > 0, 'profits-negative': token.profits < 0}">{{token.profits | currency }}</td>
        <td class="text-right" [ngClass]="{'profits-positive': token.profits > 0, 'profits-negative': token.profits < 0}">{{token.profitsPct | percent:'1.2' }}</td>
        <td class="text-right">{{token.equity | currency }} <small>{{equityPct(token) | percent}}</small></td>
        <td class="text-right">{{token.daysHeld}}</td>
      </tr>
    </table>
  </div>
</div>
