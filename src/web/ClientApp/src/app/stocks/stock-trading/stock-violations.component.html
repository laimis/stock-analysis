<div class="mt-4" *ngIf="violations">
    <ul *ngIf="violations.length > 0">
      <li class="mt-3" *ngFor="let violation of violations">
        {{violation.message}}
        <button type="button" class="btn btn-secondary me-2" (click)="recordTransaction(violation.ticker)">Record Transaction</button>
        <button type="button" class="btn btn-secondary" (click)="openPosition(violation.ticker)">Open Position</button>

        <div>
          <app-stock-transaction
            *ngIf="activeTicker === violation.ticker && fixType === 'transaction'"
            [ticker]="activeTicker"
            [numberOfShares]="violation.numberOfShares"
            [pricePerShare]="violation.pricePerShare"
            (transactionFailed)="transactionFailed($event)"
            (transactionRecorded)="transactionRecorded($event)">
          </app-stock-transaction>
          <app-stock-trading-newposition
            *ngIf="activeTicker === violation.ticker && fixType === 'position'"
            [setTicker]="violation.ticker"
            [showChart]="false"
            [showAnalysis]="false"
            [hideCreatePendingPosition]="true"
            (stockPurchased)="transactionRecorded($event)">
          </app-stock-trading-newposition>
        </div>
      </li>
    </ul>

    <span *ngIf="violations.length === 0">
      You have no violations.
    </span>
</div>

