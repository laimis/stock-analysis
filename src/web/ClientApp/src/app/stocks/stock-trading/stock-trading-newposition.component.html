<div class="card border-info">
  <div class="card-body">
    <div class="row">
      <div class="col">
        <app-symbol-search
              label="Ticker"
              placeholder="New position symbol"
              (tickerSelected)="onBuyTickerSelected($event)"
              cssClass="form-control">
          </app-symbol-search>
      </div>
      <div class="col">
        <label for="positionSize" class="form-label">Position Size</label>
        <input
          type="number"
          class="form-control"
          id="positionSize"
          [(ngModel)]="positionSize"
          (ngModelChange)="updateBuyingValuesWithPositionSize()">
      </div>
    </div>
    <div class="row mt-2" *ngIf="costToBuy">
      <div class="col">
        <label for="costToBuy" class="form-label">Price</label>
        <input
          type="number"
          id="costToBuy"
          class="form-control"
          [(ngModel)]="costToBuy"
          (ngModelChange)="updateBuyingValuesWithCostToBuy()"
        />
      </div>
      <div class="col">
        <label for="stocksToBuy" class="form-label">Shares #</label>
        <input
          type="number"
          id="stocksToBuy"
          class="form-control"
          [(ngModel)]="stocksToBuy"
          (ngModelChange)="updateBuyingValuesWithNumberOfShares()"
        />
      </div>
      <div class="col">
        <label for="stopPrice" class="form-label">Stop</label>
        <input
          type="number"
          id="stopPrice"
          class="form-control"
          [(ngModel)]="stopPrice"
          (ngModelChange)="updateBuyingValuesStopPrice()"
        />
      </div>
    </div>
    <div class="row mt-2" *ngIf="prices">
      <div class="col fs-6">
        <span class="me-2">Size: <strong>{{ positionSizeCalculated | currency }}</strong></span>
        <span class="me-2">Profit: <strong>{{ potentialProfit | currency }}</strong></span>
        <span class="me-2">Loss: <strong>{{ potentialLoss | currency }}</strong></span>
      </div>
      <div class="col text-end">
        <span class="me-2">20SMA: <strong>{{ get20sma() | currency }}</strong></span>
        <span class="me-2">50SMA: <strong>{{ get50sma() | currency }}</strong></span>
        <span class="me-2">150SMA: <strong>{{ get150sma() | currency }}</strong></span>
      </div>
    </div>
    <div class="row mt-2" *ngIf="prices">
      <div class="col">
        <textarea class="form-control" rows="5" [(ngModel)]="notes" placeholder="Notes..."></textarea>
      </div>
    <div class="row mt-2" *ngIf="prices">
      <div class="col" >
        <button class="btn btn-primary w-100" (click)="record()">Record</button>
      </div>
      <div class="col" >
        <button class="btn btn-primary w-100" (click)="brokerageBuy('limit')">Brokerage [Limit]</button>
      </div>
      <div class="col" >
        <button class="btn btn-primary w-100" (click)="brokerageBuy('market')">Brokerage [Market]</button>
      </div>
    </div>
    <div class="row mt-2" *ngIf="prices">
      <div class="col">
        <stock-trading-chart
          [prices]="prices"
          [horizontalLines]="stopAndExitPoints"
          [maxPrice]="exitPrice"></stock-trading-chart>
      </div>
    </div>
  </div>
</div>