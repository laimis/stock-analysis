<div *ngIf="loaded" class="mt-2 mb-4">

  <div>
    <div *ngIf="profile">
      <h3>{{profile.symbol}}: {{profile.companyName}}
      <a class="float-end ms-3" href="https://www.cmlviz.com/stocks/{{stock.ticker}}/tear-sheet" target="_blank">
        <img src="cml.png" height="35px" />
      </a>
      <a class="float-end ms-3" href="https://invest.ameritrade.com/grid/p/site#r=jPage/https://research.ameritrade.com/grid/wwws/research/stocks/summary?symbol={{stock.ticker}}&c_name=invest_VENDOR" target="_blank">
        <img src="td-logo-vector.svg" height="25px" />
      </a>
      <a class="float-end ms-3" href="https://finviz.com/quote.ashx?t={{stock.ticker}}" target="_blank">
        <img src="finviz.png" height="25px" />
      </a>
      </h3>

    </div>
    <div class="row">
      <div class="col">
        {{ profile.sector }} / {{ profile.industry }}
      </div>
      <div class="col text-end">
        <a [routerLink]="[ '/stocks' ]" class="h6 me-3">Portfolio Dashboard</a>
        <a [routerLink]="[ '/trading' ]" class="h6">Trading Dashboard</a>
      </div>
    </div>
  </div>

  <div class="tab-container mt-2">
    <a class="tab" [ngClass]="{'is-active': isActive('stocks')}" [routerLink]="" (click)="activateTab('stocks')">
      Shares <span *ngIf="ownership && ownership.owned > 0" class="badge rounded-pill bg-info">{{ownership.owned}}</span>
    </a>
    <a class="tab" [ngClass]="{'is-active': isActive('options')}" [routerLink]="" (click)="activateTab('options')">
      Options <span *ngIf="options && options.length > 0" class="badge rounded-pill bg-info">{{options.length}}</span>
    </a>
    <a class="tab" [ngClass]="{'is-active': isActive('fundamentals')}" [routerLink]="" (click)="activateTab('fundamentals')">
      Fundamentals
    </a>
    <a class="tab" [ngClass]="{'is-active': isActive('alerts')}" [routerLink]="" (click)="activateTab('alerts')">
      Alerts <span *ngIf="alerts && alerts.points.length > 0" class="badge rounded-pill bg-info">{{alerts.points.length}}</span>
    </a>
    <a class="tab" [ngClass]="{'is-active': isActive('notes')}" [routerLink]="" (click)="activateTab('notes')">
      Notes <span *ngIf="notes && notes.notes.length > 0" class="badge rounded-pill bg-info">{{notes.notes.length}}</span>
    </a>
    <a class="tab" [ngClass]="{'is-active': isActive('analysis')}" [routerLink]="" (click)="activateTab('analysis')">
      Analysis
    </a>

  </div>

  <stock-fundamentals *ngIf="isActive('fundamentals')" [stock]=stock></stock-fundamentals>

  <stock-ownership *ngIf="isActive('stocks')"
    [stock]=stock [ownership]=ownership
    (ownershipChanged)="stockOwnershipChanged($event)"></stock-ownership>

  <stock-option *ngIf="isActive('options')"
    [ticker]=stock.ticker [options]=options
    (ownershipChanged)="optionOwnershipChanged($event)"></stock-option>

  <stock-alerts *ngIf="isActive('alerts')"
    [alerts]=alerts [ticker]=stock.ticker
    [stock]=stock
    [ownership]=ownership
    (alertsChanged)="alertsChanged($event)"></stock-alerts>

  <stock-notes *ngIf="isActive('notes')" [notes]=notes [ticker]=stock.ticker></stock-notes>

  <app-stock-analysis *ngIf="isActive('analysis')" [ticker]=stock.ticker></app-stock-analysis>

</div>

<div *ngIf="!loaded">
	Fetching stock information...
</div>
