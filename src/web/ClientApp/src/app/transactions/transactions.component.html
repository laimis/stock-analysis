<div *ngIf="response">

  <div class="mt-2">
    {{ response.transactions.length}} transactions, {{response.debit | currency}} debit and {{response.credit | currency}} credit

    <div *ngIf="ticker" class="float-right">
      Filtered by <a [routerLink]="[ '/stocks', ticker ]">{{ticker}}</a>,
      <a [routerLink]="" (click)="!!clearFilter()">clear filter</a>
    </div>
  </div>

  <div class="mt-2" *ngFor="let g of response.grouped">
    <table class="table table-striped border">
      <caption>{{g.name}} breakdown <span class="float-right">
        debit: {{g.transactions.debit | currency}} |
        credit: {{g.transactions.credit | currency}}</span>
      </caption>
      <thead class="thead-light">
        <tr>
          <th>Date</th>
          <th>Symbol</th>
          <th>Description</th>
          <th>Debit</th>
          <th>Credit</th>
        </tr>
      </thead>
      <tbody>
        <tr
          [ngClass]="{'table-success': t.profit > 0, 'table-warning': t.profit < 0, 'table-light': t.profit == 0}"
          *ngFor="let t of g.transactions.transactions">
          <td>{{ t.date | date:'shortDate'}}</td>
          <td><a [routerLink]="" (click)="!!loadTransactions(t.ticker)">{{t.ticker}}</a></td>
          <td>{{ t.description }}</td>
          <td>{{ t.debit | currency }}</td>
          <td>{{ t.credit | currency }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
