<div>
  <div *ngIf="!report">Loading {{title}}...</div>
  <div *ngIf="report" class="mb-3">
    <h3 class="bg-secondary" *ngIf="title">{{title}}</h3>
    <div *ngIf="showSummary" class="mb-3">
        <span *ngFor="let s of report.summary"
            class="badge rounded-pill bg-secondary me-2">
            <a href="https://www.tradingview.com/chart/kQn4rgoA/?symbol={{s.ticker}}" target="_blank">{{s.ticker}}: {{s.count}}</a>
        </span>
    </div>

    <div class="mt-3 mb-3" *ngIf="report.patterns.length > 0">
      <h5>Patterns</h5>
      <table class="table striped border table-hover" *ngIf="hasPatterns(report)">
        <thead>
          <ng-container *ngFor="let tp of report.patterns">
            <tr *ngFor="let p of tp.patterns">
              <td>{{tp.ticker}}</td>
              <td>{{p.name}}</td>
            </tr>
          </ng-container>
        </thead>
      </table>
      <div *ngIf="!hasPatterns(report)" >No patterns detected</div>
    </div>

    <div *ngFor="let c of report.evaluations">
      <h5 [ngClass]="{'text-success': c.type === 'Positive', 'text-danger': c.type === 'Negative' , 'text-secondary': c.type === 'Neutral'}" style="border: 0px">{{c.name}}</h5>
      <app-outcomes *ngIf="c.matchingTickers.length > 0" [category]="c"></app-outcomes>
      <span *ngIf="c.matchingTickers.length === 0">No positions in this category.</span>
    </div>

  </div>
  
</div>