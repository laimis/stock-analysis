<div>
  <div *ngIf="!report">Loading {{title}}...</div>
  <div *ngIf="report" class="mb-3">
    
    <section>
      <h3 *ngIf="title">{{title}}</h3>
      <div *ngIf="showSummary" class="mb-3">
          <span *ngFor="let s of report.summary"
            class="badge rounded-pill me-2"
            [ngClass]="{
              'bg-success': s.count > 0,
              'bg-danger': s.count < 0,
              'bg-secondary': s.count === 0
            }">
              <a class="text-white" [href]="tradingViewLink(s.ticker)" target="_blank">{{s.ticker}}: {{s.count}}</a>
          </span>
      </div>
    </section>
    

    <section class="mt-3 mb-3" *ngIf="report.patterns.length > 0">
      <h5>Patterns</h5>
      <table class="table table-striped table-hover" *ngIf="hasPatterns(report)">
        <tbody>
          <ng-container *ngFor="let tp of report.patterns">
            <tr *ngFor="let p of tp.patterns">
              <td>
                <a [href]="tradingViewLink(tp.ticker)" target="_blank">{{tp.ticker}}</a>
              </td>
              <td>{{p.description}}</td>
            </tr>
          </ng-container>
        </tbody>
      </table>
      <div *ngIf="!hasPatterns(report)" >No patterns detected</div>
    </section>

    <section>
      <h5>Evaluations</h5>
      <div *ngFor="let c of report.evaluations" class="mb-3">
        <h5 [ngClass]="{'text-success': c.type === 'Positive', 'text-danger': c.type === 'Negative' , 'text-secondary': c.type === 'Neutral'}" style="border: 0px">
          {{c.name}}
          <span *ngIf="c.matchingTickers.length > 0" > - {{c.matchingTickers.length}}</span>
        </h5>
        <app-outcomes *ngIf="c.matchingTickers.length > 0" [category]="c" [tickerFilter]="tickerFilter"></app-outcomes>
        <span *ngIf="c.matchingTickers.length === 0">No positions in this category</span>
      </div>
    </section>

  </div>
  
</div>